<html>
  <head>
    <title>:: tasktools.org ::</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'> -->
    <style>
      body             {font-family: 'Droid Sans Mono', arial, serif; }
      TABLE            {font-size: 75%; background:#cccccc}
      TH               {background:#c0c0c0; color:#333333; text-align:left}
      TD               {background:white;   color:#444444; vertical-align:top}
    </style>
  </head>
  <body>

    <h3>Taskwarrior 2.x Plans</h3>
    <p>
      Taskwarrior 2.x is the result of many simultaneous enhancements to core
      components and desirable new features.  Many of these changes have been
      deferred until this time due to size, complexity, or the need to think
      about the interactions between components.
    </p>
    <p>
      Here are the high-level plans for the various components and features.
      There is a recurring theme of shrinking and simplifying the core code
      base, while adding flexibility and more add-on capabilities.
    </p>
    <p>
     <img src="task.2.x.png" />
    </p>

    <h4>Task Server Support</h4>
    <p>
      By supporting the Task Server Protocol it will be possible to have
      multiple clients synchronizing data, and cloud backup of local task data.
      It will allow for synching, offline storage and merging of data.  This is
      an optional feature.  Future enhancements to the task server will also be
      available in taskwarrior.
    </p>
    <p>
      The libtaskd library provides synch capabilities between the local machine
      and a task server by correctly implementing the Task Server Protocol.
      Additionally, local storage, a synch backlog and GC/pre-processing
      features are provided.

      By replacing current local storage, the format will be automatically
      upgraded to JSON.
    </p>
    <p>
      The libtaskd library will be available separately, and may be used by
      third-party software to access task data, leading to alternative clients
      implementations.
    </p>

    <h4>Date Enhancements</h4>
    <p>
      The libkronisk library takes the current flexibility with date
      specifications, and adds more variations, allowing input using forms like
      these:

      <pre>
      3rd Tuesday in March
      Easter + 2 weeks
      Thursday before the 20th
      4 business days</pre>

      The library effectively forks the date handling code, which will be
      enhanced and released on its own schedule.  This will reduce the core code
      size.
    </p>

    <h4>Color Support</h4>
    <p>
      The libvitapi library provides support for 256-color xterm output, basic
      drawing primitives, terminal size determination and input.  This will
      reduce the core code size.
    </p>

    <h4>Parsing</h4>
    <p>
      Command line parsing will be greatly improved, with new capabilities such
      as those listed in a recent "syntax festival" call for desirable CLI
      enhancements.  Examples include:

      <pre>
      task &lt;id|uuid&gt; &lt;command&gt;
      task [&lt;filter&gt;] update &lt;modifications&gt;
      task list /regex/</pre>

      The second example illustrates the added complexity supported, by allowing
      a combination of a filter and a follow-on command.  This would allow such
      commands as:

      <pre>task project:foo update pri:</pre>

      This command removes the priority from all tasks in project 'foo'.
      Various other bulk modifications will be supported.
    </p>
    <p>
      The libnibble library provides parsing capabilities in terms of a
      shift-reduce toolkit, a BNF parser and a large set of text manipulation
      capabilities.  This will reduce the core code size.
    </p>

    <h4>User-Defined Attributes</h4>
    <p>
      Using the Lua API, user-defined attributes may be specified, and will be
      first-class data types.  This means they may specify custom sorting
      characteristics, may contribute to urgency calculations, and may support
      multiple display formats.  User-defined attributes will be
      indistinguishable from built-in attributes.
    </p>
    <p>
      Several current reportable fields will be moved out of the core code and
      implemented as user-defined attributes.  This will reduce the core code
      size.
    </p>

    <h4>Report Field Styles</h4>
    <p>
      The built-in data fields will be enhanced to allow multiple display
      formats.  An example is "priority", which could be displayed in short form
      as 'H', 'M' or 'L' or in long form as 'High', 'Medium' and 'Low'.
      Each field will likely have several format options.
    </p>

    <h4>Document Object Model</h4>
    <p>
      A full DOM will provide access to all internal data such as configuration,
      arguments, report definitions and task data.  The DOM will provide a means
      to access data that will be consistent between C++ and Lua.

      An example of DOM access might be:

      <pre>123.due</pre>

      Which accesses the due date for task 123.
    </p>

    <h4>Lua Integration</h4>
    <p>
      The Lua programming language will be integrated.  Using Lua, it will be
      possible to define new commands, new attributes, and new display formats.
    </p>
    <p>
      An API will be callable from Lua code, that provides access to internal
      data via the DOM.  A series of well-defined hooks, or entry points allow
      the Lua scripts to be triggered at appropriate times.
    </p>
    <p>
      Using these Lua plugins it will be possible to extend the capabilities in
      many ways, and will reduce the core code size.  Several commands will be
      implemented in this way.
    </p>

    <h4>Expressions</h4>
    <p>
      By combining DOM access and expression evaluation, it will be possible, as
      an example, to add a new task that inherits a due date from another task:

      <pre>task add ... due:123.due</pre>

      This adds a new task with a due date set to the same due date as task 123.
      Similarly the following is possible:

      <pre>task add ... due:123.due + 1wk</pre>
    </p>

    <h4>Rendering</h4>
    <p>
      The tabular data rendering will be updated with a new View object to allow
      greater control of color and formatting, better UTF8 support, much better
      performance and more flexible sorting.
    </p>
  </body>
</html>
