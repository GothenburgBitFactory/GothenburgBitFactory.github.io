<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>tasktools.org</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono:regular' rel='stylesheet' type='text/css'>

    <link href="../../assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
    </style>
    <link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../../assets/ico/apple-touch-icon-57-precomposed.png">
  </head>

  <body>
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://tasktools.org">tasktools.org</a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="http://taskwarrior.org">taskwarrior.org</a></li>
            </ul>

            <ul class="nav pull-right">
              <li><a href="../../about.html">About</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contact<b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="mailto:support@taskwarrior.org">taskwarrior Support</a></li>
                  <li><a href="mailto:support@yootabory.org">yootabory Support</a></li>
                </ul>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span8">
          <h3>What is it?</h3>
          <p>
            Continuous Integration is an established best practice.  The 'ci'
            system makes it easy - trivial in fact - to setup your own
            continuous integration system, which can manage multiple projects,
            and multiple simultaneous build platforms.
          </p>
          <p>
            Ci is a command-line system operated by a single user command, with
            practically no interface, and minimal system requirements.
          </p>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span8">
          <h3>How does it work?</h3>
          <p>
            The ci system has three nodes: central, satellite and dev.  These
            nodes may reside on one machine, or may be distributed across many.
            Here is the simplest representation of this.
          </p>
          <p><img src="ci-overview.png" /></p>

          <p>
            First there is the central node.  This is a server that runs on a
            single machine and coordinates the ci system.  Central receives
            notification of code changes and maintains a list of builds that
            need to be performed.  All nodes communicate with central.
          </p>

          <p>
            The satellite node performs build and test duties, as directed by
            central.  When a satellite asks central for work, it provides a
            detailed profile of its platform and environment, such as OS and
            compiler version.  Central will match this profile against any build
            requests, and will either respond with a project profile or will
            decline.  The satellite will then perform the work and post back
            the results to central.
          </p>

          <p>
            That leaves the dev client, which is the originator of build
            requests.  Once initialized the developer does not interact with ci.
            A commit hook will be installed, and this will trigger a build for
            every commit made by sending the project profile to central.  This
            process adds a fraction of a second delay to every commit, but
            otherwise you might never know it is there.
          </p>

          <p>
            You only need to run one command (ci init) per project, ever.  The
            rest is completely automated.
          </p>

          <p>
            If the project does not use an SCM system, the features are more
            limited, for example there will be no commit hook requiring that
            "ci build" is be run manually.  This means that with one command,
            you will be able to initiate the build and test process among all
            the platforms, but it cannot be fully automated.
          </p>

          <p>
            The whole ci system is highly configurable, and easily extended to
            broaden the support for diverse needs.  There is a built-in
            tolerance for machine unavailability, which allows it to accomodate
            modern development environments that include laptops, virtual
            machines and cloud computing.
          </p>
        </div>
      </div>

      <div class="row-fluid">
        <div class="span8">
          <h3>Sample Setup</h3>
          <p>
            Describing a sample setup will help clarify the roles and
            responsibilities of the nodes, as well as illustrate a typical
            setup.  The simplest setup involves running central, satellite and
            dev nodes all on the same machine, but that is not a very
            interesting example.  Here is a typical setup.
          </p>
          <p><img src="ci-arch.png" /></p>

          <p>
            Suppose you have a project which you wish to build and test on
            three platforms.  You would need three satellite nodes, one central
            node, and a dev node.  Ci is installed on all nodes.

            It could be that the central and dev nodes are on one or two of
            those platforms, but that is not important.
          </p>

          <p>
            It is convenient, but not necessary that the central node is
            installed on a continuously available system.  After all, it is
            corrdinating the work.
          </p>

          <p>
            Here is how you would go about setting up such a system:
          </p>

          <p>
            First we setup and run central on machine 'dev1':
            <ul>
              <li>Install ci on the central node using your package manager
              <li>Create a directory for central to operate in.  In this
                  example, that will be /local/central
              <li><code>$ cd /local/central</code>
              <li><code>$ ci init --central --admin /local/central --port 6543</code>
              <li><code>$ ci central</code>
            </ul>
          </p>

          <p>
            Next set up and run the first of the three satellites:
            <ul>
              <li>Install ci on the satellite node using your package manager.
                  Note that you will also need a set of development tools so
                  that satellite can perform builds, as well as access to
                  central.
              <li>Create a directory for the satellite to operate in.  In this
                  example, that will be /local/satellite
              <li><code>$ cd /local/satellite</code>
              <li><code>$ ci init --satellite --admin /local/satellite --scratch /local/satellite</code>
              <li><code>$ ci config satellite.label Ubuntu_12.04</code>
              <li><code>$ ci config central.server dev1:6543</code>
              <li><code>$ ci satellite</code>
            </ul>
          </p>

          <p>
            The other satellites are set up in a similar fashion, but with
            unique 'satellite.label' values.  If two satellites share the same
            label, they also share the workload, so they need to be be
            identical.
          </p>

          <p>
            Finally the dev node.  In this example, the dev node is a clone of
            the Taskwarrior project:
            <ul>
              <li><code>$ git clone git://tasktools.org:task.git task.git</code>
              <li><code>$ cd task.git</code>
              <li><code>$ ci init --host dev1:6543</code>
           </ul>
          </p>

          <p>
            Now when a commit is made on the laptop, the commit hook will
            trigger and notify central of the need for a build.  Each of the
            running satellites occasionally asks for work from central, and will
            perform the build.  Once completed, logs are sent back to central,
            which stores them in a structured file system.
          </p>

          <p>
            If any node is not available, the sender will spool the message
            until the recipient is available again, and then resume.
          </p>

          <!-- How about installing a tinderbox hook? -->

        </div>
      </div>

      <br />

      <hr />
      Copyright &copy; 2012,
      <a href="http://tasktools.org/about.html">GÃ¶teborg Bit Factory</a>.
    </div> <!-- /container -->

    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../assets/js/jquery.js"></script>
    <script src="../../assets/js/bootstrap-transition.js"></script>
    <script src="../../assets/js/bootstrap-alert.js"></script>
    <script src="../../assets/js/bootstrap-modal.js"></script>
    <script src="../../assets/js/bootstrap-dropdown.js"></script>
    <script src="../../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../../assets/js/bootstrap-tab.js"></script>
    <script src="../../assets/js/bootstrap-tooltip.js"></script>
    <script src="../../assets/js/bootstrap-popover.js"></script>
    <script src="../../assets/js/bootstrap-button.js"></script>
    <script src="../../assets/js/bootstrap-collapse.js"></script>
    <script src="../../assets/js/bootstrap-carousel.js"></script>
    <script src="../../assets/js/bootstrap-typeahead.js"></script>

    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://tasktools.org/piwik/" : "http://tasktools.org/piwik/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 3);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://tasktools.org/piwik/piwik.php?idsite=3" style="border:0" alt="" /></p></noscript>
    <!-- End Piwik Tag -->
  </body>
</html>

